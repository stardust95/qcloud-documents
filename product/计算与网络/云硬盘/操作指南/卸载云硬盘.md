## 操作场景

当您需要将**弹性云盘**挂载到另一台实例上使用时，您可以主动地从实例断开该弹性云盘，并将其连接到其他实例上。**卸载弹性云盘并不会清除该硬盘上的数据。**

## 前提条件

目前支持对弹性云硬盘进行卸载，不可卸载系统盘和非弹性云硬盘。卸载数据盘时，请确保您已了解以下事项。

### Windows 操作系统

在 Windows 操作系统下，为了保证数据完整性，建议您暂停对该磁盘的所有文件系统的读写操作，否则未完成读写的数据会丢失。解挂弹性云盘时需要先将磁盘设为脱机状态，否则在不重启云服务器的情况下，您可能将无法再次挂载弹性云盘。如下图所示：
![](https://mccdn.qcloud.com/static/img/92a187945b9f4318981ea70b6532e1d6/image.png)

### Linux 操作系统

在 Linux 操作系统下，您需要先登录实例，并对需要卸载的弹性云硬盘进行 umount 操作。命令执行成功后，进入控制台对磁盘进行卸载操作。若未进行 umount 操作直接被强制解挂，关机时和开机时可能会出现如下图所示的问题：
![](https://mccdn.qcloud.com/static/img/9939fccce6e6d9ead64b5703455d4403/image.png)
![](https://mccdn.qcloud.com/static/img/9939fccce6e6d9ead64b5703455d4403/image.png)

### 创建了 LVM 逻辑卷的情况

如果您在云服务器内创建了 LVM 逻辑卷，直接从控制台卸载磁盘会造成部分 device 数据残留在子机内存中，当子机内部有应用尝试遍历或者访问该设备时，将会出现系统错误。因此，请您提前执行以下操作（本例假设基于 /dev/vdb1 创建了逻辑卷 /dev/test/lv1，挂载在 /data 目录下）：
1. 执行 `umount  /data` 命令，在子机内部 umount 对应磁盘挂载点。
2. 执行 `lvremove /dev/test/lv1` 命令，移除 LV。
如果有多个 LV，请依次对所有 LV 进行操作
3. 执行 `vgremove test` 命令，移除 VG。
4. 执行 `pvremove /dev/vdb1` 命令，移除 PV。
5. 修改 `/etc/fstab` 文件，避免下次启动继续挂载对应 LV。

## 操作步骤

### 使用控制台卸载云硬盘

1. 登录 [云硬盘控制台](https://console.cloud.tencent.com/cvm/cbs)。
2. 在云硬盘管理页面，单击状态为**已挂载、支持挂载/卸载**的云硬盘行的【更多】>【卸载】。如下图所示：
>? 您也可以在云硬盘管理页面，勾选状态为**已挂载、支持挂载/卸载**的云硬盘，单击顶部【卸载】进行批量卸载。

 ![](https://main.qcloudimg.com/raw/4f62d6eeb85839f0762044db68da15be.png)
4. 在弹出的 “卸载云硬盘” 提示框中，确认警告事项，单击【确认】，完成卸载。

### 使用 API 卸载云硬盘

用户可以使用 DetachDisks 接口卸载云硬盘，具体内容请参考 [解挂云硬盘接口](https://cloud.tencent.com/document/product/362/16316)。
